<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join as Creator - Photography Platform</title>
    <link rel="stylesheet" href="creator.css">


</head>

<body>
    <div class="container">
        <header>
            <h1>Join Our Creative Community</h1>
            <p class="subtitle">Share your skills, set your rates, and connect with clients</p>
        </header>

        <div class="tabs">
            <div class="tab active" data-type="photographer">Photographer</div>
            <div class="tab" data-type="editor">Editor</div>
        </div>

        <form id="creator-form">
            <input type="hidden" id="creator-type" name="creator_type" value="photographer">

            <div class="form-group">
                <label for="full-name">Full Name *</label>
                <input type="text" id="full-name" name="full_name" required>
            </div>

            <div class="form-group">
                <label for="email">Email Address *</label>
                <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
                <label for="phone">Phone Number *</label>
                <input type="tel" id="phone" name="phone" value="+91" required>
            </div>

            <div class="form-group">
                <label for="location">Location *</label>
                <input type="text" id="location" name="location" placeholder="City, Country" required>
            </div>

            <div class="form-group">
                <label for="experience">Years of Experience *</label>
                <input type="number" id="experience" name="experience" min="0" required>
            </div>

            <div class="form-group">
                <label for="equipment">Equipment Used</label>
                <input type="text" id="equipment" name="equipment" placeholder="Camera models, Gimbal, editing software, etc.">
            </div>

            <div class="form-group full-width">
                <label for="bio">Bio/Description *</label>
                <textarea id="bio" name="bio" placeholder="Tell us about yourself and your work style..."
                    required></textarea>
            </div>

            <div class="form-group">
                <div class="photo-upload">
                    <label>Profile Photo</label>
                    <div class="photo-preview" id="photo-preview">
                        <span>Upload Photo</span>
                    </div>
                    <input type="file" id="profile-photo" name="profile_photo" accept="image/*" style="display: none;">
                    <button type="button" id="upload-photo-btn">Choose Photo</button>
                </div>
            </div>

            <div class="form-group">
                <label for="website">Website/Portfolio URL</label>
                <input type="url" id="website" name="website" placeholder="https://yourportfolio.com">
            </div>

            <div class="form-group">
                <label for="instagram">Instagram Handle</label>
                <input type="text" id="instagram" name="instagram" placeholder="@yourusername">
            </div>

            <div class="form-group">
                <label for="availability">Availability *</label>
                <select id="availability" name="availability" required>
                    <option value="">Select availability</option>
                    <option value="full-time">Full-time</option>
                    <option value="part-time">Part-time</option>
                    <option value="weekends">Weekends only</option>
                    <option value="custom">Custom schedule</option>
                </select>
            </div>

            <div class="form-group full-width services-section" id="photographer-services">
                <label>Services & Pricing *</label>
                <div class="service-item">
                    <input type="checkbox" id="portrait" name="services" value="portrait">
                    <label for="portrait">Portrait Photography</label>
                    <div class="service-price">
                        <span>₹</span>
                        <input type="number" name="portrait_price" placeholder="Price">
                        <span>per hour</span>
                    </div>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="wedding" name="services" value="wedding">
                    <label for="wedding">Wedding Photography</label>
                    <div class="service-price">
                        <span>₹</span>
                        <input type="number" name="wedding_price" placeholder="Price">
                        <span>per event</span>
                    </div>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="event" name="services" value="event">
                    <label for="event">Event Photography</label>
                    <div class="service-price">
                        <span>₹</span>
                        <input type="number" name="event_price" placeholder="Price">
                        <span>per hour</span>
                    </div>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="product" name="services" value="product">
                    <label for="product">Product Photography</label>
                    <div class="service-price">
                        <span>₹</span>
                        <input type="number" name="product_price" placeholder="Price">
                        <span>per item</span>
                    </div>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="architectural" name="services" value="architectural">
                    <label for="architectural">Architectural Photography</label>
                    <div class="service-price">
                        <span>₹</span>
                        <input type="number" name="architectural_price" placeholder="Price">
                        <span>per project</span>
                    </div>
                </div>
            </div>





            <div class="form-group full-width services-section hidden" id="editor-services">
                <label>Services & Pricing *</label>
                <div class="service-item">
                    <input type="checkbox" id="photo-editing" name="services" value="photo-editing">
                    <label for="photo-editing">Photo Editing</label>
                    <div class="service-price">
                        <span>₹</span>
                        <input type="number" name="photo_editing_price" placeholder="Price">
                        <span>per photo</span>
                    </div>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="color-grading" name="services" value="color-grading">
                    <label for="color-grading">Video Editing</label>
                    <div class="service-price">
                        <span>₹</span>
                        <input type="number" name="color_grading_price" placeholder="Price">
                        <span>per photo</span>
                    </div>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="retouching" name="services" value="retouching">
                    <label for="retouching">Retouching</label>
                    <div class="service-price">
                        <span>₹</span>
                        <input type="number" name="retouching_price" placeholder="Price">
                        <span>per photo</span>
                    </div>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="compositing" name="services" value="compositing">
                    <label for="compositing">Compositing</label>
                    <div class="service-price">
                        <span>₹</span>
                        <input type="number" name="compositing_price" placeholder="Price">
                        <span>per project</span>
                    </div>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="batch-processing" name="services" value="batch-processing">
                    <label for="batch-processing">Batch Processing</label>
                    <div class="service-price">
                        <span>₹</span>
                        <input type="number" name="batch_processing_price" placeholder="Price">
                        <span>per 100 photos</span>
                    </div>
                </div>
            </div>




            <div class="form-group full-width portfolio-section">
                <label>Portfolio Links (Add your best work)</label>
                <div id="portfolio-links">
                    <div class="portfolio-item">
                        <input type="url" name="portfolio[]" placeholder="https://example.com/your-work">
                        <span class="add-more" id="add-portfolio">+ Add More</span>
                    </div>
                </div>
            </div>

            <div class="form-group full-width">
                <label for="payment-methods">Accepted Payment Methods</label>
                <div class="service-item">
                    <input type="checkbox" id="bank-transfer" name="payment_methods" value="bank-transfer">
                    <label for="bank-transfer">Bank Transfer</label>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="paypal" name="payment_methods" value="paypal">
                    <label for="paypal">UPI</label>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="credit-card" name="payment_methods" value="credit-card">
                    <label for="credit-card">Credit Card</label>
                </div>
                <div class="service-item">
                    <input type="checkbox" id="cash" name="payment_methods" value="cash">
                    <label for="cash">Cash</label>
                </div>
            </div>

            <div class="agreement">
                <input type="checkbox" id="agree" required>
                <label for="agree">I agree to the <a href="Terms.html" target="_blank">Terms & Conditions</a> and want to continue.</label>
              </div>
              


            <div class="form-group full-width">
                <button type="submit" id="submit-btn">Join as Creator</button>
                <p class="success-message hidden" id="success-message">Registration successful! We'll review your
                    information and get back to you soon.</p>
            </div>
        </form>
    </div>

    <button class="back"><a href="index.html">Go to Home</a></button>

    <script src="creator.js"></script>
</body>



<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCau9WO46zgDa-HwvwbRTTV0yu2C5cu4EI",
    authDomain: "pixero-a1f4d.firebaseapp.com",
    projectId: "pixero-a1f4d",
    storageBucket: "pixero-a1f4d.firebasestorage.app",
    messagingSenderId: "84885389510",
    appId: "1:84885389510:web:fafa53f6e6506c75c357c7",
    measurementId: "G-0V2V73WEYB"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

//   document.getElementById("creator-form").addEventListener("submit", async (e) => {
//     e.preventDefault();

//     const form = e.target;

//     // Collect services with prices
//     const selectedServices = {};
//     form.querySelectorAll('input[type="checkbox"][name="services"]:checked').forEach((checkbox) => {
//       const service = checkbox.value;
//       const priceInput = checkbox.closest('.service-item').querySelector('input[type="number"]');
//       selectedServices[service] = priceInput?.value || null;
//     });

//     // Collect portfolio links
//     const portfolioInputs = form.querySelectorAll('input[name="portfolio[]"]');
//     const portfolioLinks = Array.from(portfolioInputs).map(input => input.value).filter(link => link !== '');

//     // Collect payment methods
//     const paymentMethods = Array.from(form.querySelectorAll('input[name="payment_methods"]:checked')).map(el => el.value);

//     // Collect data
//     const data = {
//       creator_type: form.creator_type.value,
//       full_name: form.full_name.value,
//       email: form.email.value,
//       phone: form.phone.value,
//       location: form.location.value,
//       experience: form.experience.value,
//       equipment: form.equipment.value,
//       bio: form.bio.value,
//       website: form.website.value,
//       instagram: form.instagram.value,
//       availability: form.availability.value,
//       services: selectedServices,
//       portfolio_links: portfolioLinks,
//       payment_methods: paymentMethods,
//       created_at: new Date().toISOString()
//     };

//     try {
//       await addDoc(collection(db, "creators"), data);
//       document.getElementById("success-message").classList.remove("hidden");
//       form.reset();
//     } catch (error) {
//       alert("Failed to submit. Please try again.");
//       console.error("Error adding document: ", error);
//     }
//   });



// Replace your existing service collection code with this:

document.getElementById("creator-form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const form = e.target;

  // Collect services with prices - FIXED FORMAT
  const services = [];
  form.querySelectorAll('input[type="checkbox"][name="services"]:checked').forEach((checkbox) => {
    const service = checkbox.value;
    const priceInput = checkbox.closest('.service-item').querySelector('input[type="number"]');
    const price = priceInput?.value;
    
    if (price) {
      // Create service object in the expected format
      let serviceName = '';
      let unit = 'photo'; // default unit
      
      // Map service values to display names and units
      switch(service) {
        case 'photo-editing':
          serviceName = 'Photo Editing';
          unit = 'photo';
          break;
        case 'color-grading':
          serviceName = 'Video Editing';
          unit = 'video'; // Note: your HTML says "per photo" but should be "per video"
          break;
        case 'retouching':
          serviceName = 'Retouching';
          unit = 'photo';
          break;
        case 'compositing':
          serviceName = 'Compositing';
          unit = 'project';
          break;
        case 'batch-processing':
          serviceName = 'Batch Processing';
          unit = '100 photos';
          break;
        default:
          serviceName = service.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
          unit = 'item';
      }
      
      services.push({
        service_name: serviceName,
        price: price,
        unit: unit
      });
    }
  });

  // Collect portfolio links - FIXED FORMAT
  const portfolioInputs = form.querySelectorAll('input[name="portfolio[]"]');
  const portfolio = Array.from(portfolioInputs)
    .map(input => input.value.trim())
    .filter(link => link !== '')
    .map(link => ({
      portfolio_link: link
    }));

  // Collect payment methods
  const paymentMethods = Array.from(form.querySelectorAll('input[name="payment_methods"]:checked')).map(el => el.value);

  // Collect data
  const data = {
    creator_type: form.creator_type.value,
    full_name: form.full_name.value,
    email: form.email.value,
    phone: form.phone.value,
    location: form.location.value,
    experience: form.experience.value,
    equipment: form.equipment.value,
    bio: form.bio.value,
    website: form.website.value,
    instagram: form.instagram.value,
    availability: form.availability.value,
    hourly_rate: form.hourly_rate?.value || null, // Add this if you have hourly rate field
    services: services,        // Now in correct array format
    portfolio: portfolio,      // Now in correct array format  
    payment_methods: paymentMethods,
    created_at: new Date().toISOString()
  };

  try {
    await addDoc(collection(db, "creators"), data);
    document.getElementById("success-message").classList.remove("hidden");
    form.reset();
  } catch (error) {
    alert("Failed to submit. Please try again.");
    console.error("Error adding document: ", error);
  }
});
</script>


</html>
